<ion-content>
  <a id="topOfPage" href="#topOfPage"></a>
  
  <!-- Formulario para crear/editar publicaciones -->
  <ion-card>
    <ion-card-header style="color: white; display: flex; align-items: center; justify-content: space-between;">
      <h3>{{ 'Foro.Title.Gestionar' | translate }}</h3>
      <p>{{ selectedPostText }}</p>
    </ion-card-header>

    <ion-card-content>
      <ion-item>
        <ion-input
          [(ngModel)]="post.title"
          label="{{ 'Foro.Label.Titulo' | translate }}"
          labelPlacement="floating"
          fill="outline"
          placeholder="{{ 'Foro.Placeholder.Titulo' | translate }}">
        </ion-input>
      </ion-item>

      <ion-item>
        <ion-textarea
          [(ngModel)]="post.body"
          label="{{ 'Foro.Label.Descripcion' | translate }}"
          labelPlacement="floating"
          fill="outline"
          placeholder="{{ 'Foro.Placeholder.Descripcion' | translate }}"
          rows="5">
        </ion-textarea>
      </ion-item>

      <div class="ion-text-center margin-top-6">
        <ion-button (click)="cleanPost()">{{ 'Foro.Button.Limpiar' | translate }}</ion-button>
        <ion-button (click)="savePost()">
          {{ post.id ? ('Foro.Button.Actualizar' | translate) : ('Foro.Button.Guardar' | translate) }}
        </ion-button>
      </div>
      
    </ion-card-content>
  </ion-card>

  <br>

  <!-- Solo muestra esta sección si hay publicaciones -->
  <div *ngIf="posts.length > 0" style="align-items: center;">
    <!-- Título de publicaciones recientes -->
    <h3 style="text-align: center; color: white;">{{ 'Foro.Title.Recientes' | translate }}</h3>

    <!-- Tabla de publicaciones recientes -->
    <ion-grid>
      <ion-row>
        <ion-col size="12" *ngFor="let post of posts; trackBy: getPostId">
          <ion-card>
            <ion-card-header>
              <p style="font-size: smaller; color: white;">#{{ post.id }} - {{ post.author }}</p>
              <h4 style="color: white; line-height: 1.2;">{{ post.title }}</h4>
            </ion-card-header>

            <ion-card-content>
              <p>{{ post.body }}</p>
            </ion-card-content>

            <!-- Contenedor para los botones de editar y eliminar -->
            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-right: 16px;">
              <ion-button (click)="editPost(post)">
                <ion-icon size="small" name="pencil-outline"></ion-icon>
              </ion-button>
              <ion-button size="small" color="danger" (click)="deletePost(post)">
                <ion-icon name="trash-outline"></ion-icon>
              </ion-button>
            </div>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>

  <!-- Mensaje cuando no hay publicaciones -->
  <div *ngIf="posts.length === 0" style="align-items: center;">
    <h4 style="text-align: center; color: white;">{{ 'Foro.Title.NoEncontrado' | translate }}</h4>
  </div>
</ion-content>
